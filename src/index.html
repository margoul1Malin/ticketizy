<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticketizy - G√©n√©rateur d'√âtiquettes</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>üè∑Ô∏è Ticketizy</h2>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-btn active" data-page="import">
                    üì∏ Import & OCR
                </button>
                <button class="nav-btn" data-page="edit">
                    üìù √âdition JSON
                </button>
                <button class="nav-btn" data-page="generate">
                    üè∑Ô∏è G√©n√©ration √âtiquettes
                </button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Page Import & OCR -->
            <div class="page" id="importPage">
                <header>
                    <h1>üì∏ Import & OCR</h1>
                    <p>Traitement des images et extraction des donn√©es</p>
                </header>

                <!-- Configuration API -->
                <section class="config-section">
                    <h2>üîß Configuration API</h2>
                    <div class="config-form">
                        <label for="apiKeyInput">Cl√© API Gemini :</label>
                        <input type="password" id="apiKeyInput" class="api-input" placeholder="Entrez votre cl√© API Gemini">
                        <button id="saveApiKeyBtn" class="btn btn-primary">üíæ Sauvegarder</button>
                        <p class="config-info">La cl√© API est sauvegard√©e localement et ne sera pas partag√©e.</p>
                    </div>
                </section>

                <!-- Import d'images -->
                <section class="import-section">
                    <h2>üì∏ Import d'Images</h2>
                    <div class="drop-zone" id="dropZone">
                        <div class="drop-zone-content">
                            <p>üìÅ Glissez-d√©posez vos images ici</p>
                            <p>ou</p>
                            <button id="selectFilesBtn" class="btn btn-primary">üìÇ S√©lectionner des fichiers</button>
                            <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.png" style="display: none;">
                        </div>
                    </div>
                    <div class="file-list" id="fileList"></div>
                </section>

                <!-- Import de fichier texte -->
                <section class="import-text-section">
                    <h2>üìÑ Import de Fichier Texte</h2>
                    <div class="text-import-content">
                        <p>Importez un fichier texte contenant vos donn√©es d'√©tiquettes</p>
                        <div class="text-import-controls">
                            <button id="selectTextFileBtn" class="btn btn-info">üìÑ S√©lectionner fichier texte</button>
                            <input type="file" id="textFileInput" accept=".txt" style="display: none;">
                        </div>
                        <div class="text-import-info">
                            <p><strong>Format attendu :</strong></p>
                            <pre>Appareil : OLED77C54LA
506MADHOV378 - 5Q1Q02ZQ

Appareil : OLED65C54LA
506MADHOV370 - 5Q1Q02ZQ
505MAKR07P81 - 5F1Q026M</pre>
                        </div>
                    </div>
                </section>

                <!-- Zone de traitement -->
                <section class="processing-section" id="processingSection" style="display: none;">
                    <h2>‚öôÔ∏è Traitement en cours...</h2>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <p id="progressText">Initialisation...</p>
                    </div>
                </section>

                <!-- R√©sultats -->
                <section class="results-section" id="resultsSection" style="display: none;">
                    <h2>üìä R√©sultats</h2>
                    <div class="results-grid">
                        <!-- Summary of processed files will be injected here -->
                    </div>
                    
                    <div class="actions">
                        <button id="importToJsonBtn" class="btn btn-success">üìä Importer dans JSON</button>
                        <button id="generateLabelBtn" class="btn btn-primary">üè∑Ô∏è G√©n√©rer √âtiquette</button>
                        <button id="generateAllLabelsBtn" class="btn btn-warning">üè∑Ô∏è G√©n√©rer Toutes les √âtiquettes</button>
                    </div>
                </section>
            </div>

            <!-- Page √âdition JSON -->
            <div class="page" id="editPage" style="display: none;">
                <header>
                    <h1>üìù √âdition JSON</h1>
                    <p>Modification manuelle des donn√©es</p>
                </header>

                <section class="json-editor-section">
                    <div class="json-controls">
                        <button id="saveJsonBtn" class="btn btn-success">üíæ Sauvegarder JSON</button>
                        <button id="exportToExcelBtn" class="btn btn-warning">üìä Exporter vers Excel</button>
                        <button id="openConsoleBtn" class="btn btn-secondary">üîß Ouvrir Console</button>
                    </div>
                    
                    <div class="json-structure">
                        <div class="add-etiquette-section">
                            <h3>üì¶ √âtiquettes</h3>
                            <button id="addEtiquetteBtn" class="btn btn-success">‚ûï Ajouter une √©tiquette</button>
                        </div>
                        
                        <div class="etiquettes-container" id="etiquettesContainer">
                            <!-- Les √©tiquettes seront g√©n√©r√©es ici dynamiquement -->
                        </div>
                    </div>
                </section>
            </div>

            <!-- Page G√©n√©ration √âtiquettes -->
            <div class="page" id="generatePage" style="display: none;">
                <header>
                    <h1>üè∑Ô∏è G√©n√©ration √âtiquettes</h1>
                    <p>G√©n√©rer des √©tiquettes depuis le JSON</p>
                </header>

                <section class="generate-section">
                    <!-- Configuration des param√®tres -->
                    <div class="config-params">
                        <h2>‚öôÔ∏è Configuration</h2>
                        
                        <div class="config-group">
                            <label for="modelPathInput">üìÑ Mod√®le d'√©tiquette :</label>
                            <div class="file-input-group">
                                <input type="text" id="modelPathInput" class="file-path-input" placeholder="Chemin vers le mod√®le d'√©tiquette..." readonly>
                                <button id="selectModelBtn" class="btn btn-secondary">üìÇ Parcourir</button>
                            </div>
                            <p class="config-info">S√©lectionnez le fichier image du mod√®le d'√©tiquette (PNG, JPG)</p>
                        </div>
                        
                        <div class="config-group">
                            <label for="outputPathInput">üìÅ Dossier de sortie :</label>
                            <div class="file-input-group">
                                <input type="text" id="outputPathInput" class="file-path-input" placeholder="Dossier de sortie des √©tiquettes..." readonly>
                                <button id="selectOutputBtn" class="btn btn-secondary">üìÇ Parcourir</button>
                            </div>
                            <p class="config-info">Dossier o√π seront sauvegard√©es les √©tiquettes g√©n√©r√©es</p>
                        </div>
                    </div>

                    <div class="generate-options">
                        <h2>üéØ Options de g√©n√©ration</h2>
                        
                        <div class="option-group">
                            <label>
                                <input type="radio" name="generateOption" value="all" checked>
                                G√©n√©rer toutes les √©tiquettes
                            </label>
                        </div>
                        
                        <div class="option-group">
                            <label>
                                <input type="radio" name="generateOption" value="etiquette">
                                G√©n√©rer pour une √©tiquette sp√©cifique
                            </label>
                            <select id="etiquetteSelect" class="generate-select" disabled>
                                <option value="">S√©lectionner une √©tiquette...</option>
                            </select>
                        </div>
                        
                        <div class="option-group">
                            <label>
                                <input type="radio" name="generateOption" value="model">
                                G√©n√©rer pour un mod√®le sp√©cifique
                            </label>
                            <select id="modelSelect" class="generate-select" disabled>
                                <option value="">S√©lectionner un mod√®le...</option>
                            </select>
                        </div>
                        
                        <div class="option-group">
                            <label>
                                <input type="radio" name="generateOption" value="group">
                                G√©n√©rer pour un groupe sp√©cifique
                            </label>
                            <select id="groupSelect" class="generate-select" disabled>
                                <option value="">S√©lectionner un groupe...</option>
                            </select>
                        </div>
                        

                    </div>
                    
                    <div class="generate-actions">
                        <button id="generateLabelsBtn" class="btn btn-primary">üè∑Ô∏è G√©n√©rer les √©tiquettes</button>
                    </div>
                </section>
            </div>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Modales -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Titre</h3>
                <button class="modal-close" id="modalCloseBtn">√ó</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Contenu de la modale -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modalCancelBtn">Annuler</button>
                <button class="btn btn-primary" id="modalConfirmBtn">Confirmer</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
